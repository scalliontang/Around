[{"/Users/sicongtang/Developer/Around/around-web/src/index.js":"1","/Users/sicongtang/Developer/Around/around-web/src/reportWebVitals.js":"2","/Users/sicongtang/Developer/Around/around-web/src/components/App.js":"3","/Users/sicongtang/Developer/Around/around-web/src/constants.js":"4","/Users/sicongtang/Developer/Around/around-web/src/components/TopBar.js":"5","/Users/sicongtang/Developer/Around/around-web/src/components/Main.js":"6","/Users/sicongtang/Developer/Around/around-web/src/components/Home.js":"7","/Users/sicongtang/Developer/Around/around-web/src/components/Register.js":"8","/Users/sicongtang/Developer/Around/around-web/src/components/Login.js":"9","/Users/sicongtang/Developer/Around/around-web/src/components/SearchBar.js":"10","/Users/sicongtang/Developer/Around/around-web/src/components/CreatePostButton.js":"11","/Users/sicongtang/Developer/Around/around-web/src/components/PhotoGallery.js":"12","/Users/sicongtang/Developer/Around/around-web/src/components/PostForm.js":"13"},{"size":320,"mtime":1608077787897,"results":"14","hashOfConfig":"15"},{"size":362,"mtime":1608050762946,"results":"16","hashOfConfig":"15"},{"size":753,"mtime":1608507755141,"results":"17","hashOfConfig":"15"},{"size":182,"mtime":1608073395724,"results":"18","hashOfConfig":"15"},{"size":616,"mtime":1608664494018,"results":"19","hashOfConfig":"15"},{"size":894,"mtime":1608664691947,"results":"20","hashOfConfig":"15"},{"size":4078,"mtime":1608663669690,"results":"21","hashOfConfig":"15"},{"size":3474,"mtime":1608658649287,"results":"22","hashOfConfig":"15"},{"size":2396,"mtime":1608664971862,"results":"23","hashOfConfig":"15"},{"size":1610,"mtime":1608664507923,"results":"24","hashOfConfig":"15"},{"size":3169,"mtime":1608664013819,"results":"25","hashOfConfig":"15"},{"size":1509,"mtime":1608659929564,"results":"26","hashOfConfig":"15"},{"size":1849,"mtime":1608663969021,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"awp1we",{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"33"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42","usedDeprecatedRules":"30"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"30"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"54","usedDeprecatedRules":"30"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"59"},"/Users/sicongtang/Developer/Around/around-web/src/index.js",[],["60","61"],"/Users/sicongtang/Developer/Around/around-web/src/reportWebVitals.js",[],["62","63"],"/Users/sicongtang/Developer/Around/around-web/src/components/App.js",[],"/Users/sicongtang/Developer/Around/around-web/src/constants.js",[],"/Users/sicongtang/Developer/Around/around-web/src/components/TopBar.js",[],"/Users/sicongtang/Developer/Around/around-web/src/components/Main.js",["64"],"import React, { useState } from \"react\";\nimport { Route, Switch, Redirect } from \"react-router\";\n\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport Home from \"./Home\";\n\nfunction Main(props) {\n    const { isLoggedIn, handleLoggedIn } = props;\n\n    const showLogin = () => {\n        return isLoggedIn ? (\n            <Redirect to=\"/home\" />\n        ) : (\n            <Login handleLoggedIn={handleLoggedIn} />\n        );\n    };\n\n    const showHome = () => {\n        return isLoggedIn ? <Home /> : <Redirect to=\"/login\" />;\n    };\n    return (\n        <div className=\"main\">\n        <Switch>\n            <Route path=\"/\" exact render={showLogin} />\n            <Route path=\"/login\" render={showLogin} />\n            <Route path=\"/register\" component={Register} />\n            <Route paht=\"/home\" render={{showHome}} />\n        </Switch>\n    </div>\n    );\n}\n\nexport default Main;","/Users/sicongtang/Developer/Around/around-web/src/components/Home.js",["65","66","67"],"import React, { useState, useEffect } from \"react\";\nimport { Tabs, message, Row, Col, Button } from 'antd';\nimport axios from \"axios\";\n\nimport SearchBar from \"./SearchBar\";\nimport PhotoGallery from \"./PhotoGallery\";\nimport CreatePostButton from \"./CreatePostButton\";\nimport { SEARCH_KEY, BASE_URL, TOKEN_KEY } from \"../constants\";\n\n\nconst { TabPane } = Tabs;\n\nfunction Home(props) {\n    const [ posts, setPost ] = useState([]);\n    const [ activeTab, setActiveTab ] = useState(\"image\");\n    const [ searchOption, setSearchOption ] = useState({\n        type: SEARCH_KEY.all,\n        keyword: \"\"\n    });\n\n    const handleSearch = (option) => {\n        const { type, keyword } = option;\n        setSearchOption({ type: type, keyword: keyword });\n    };\n\n    useEffect(() => {\n        const { type, keyword } = searchOption;\n        fetchPost(searchOption);\n    }, [searchOption]);\n\n    const fetchPost = (option) => {\n        const { type, keyword } = option;\n        let url = \"\";\n\n        if (type === SEARCH_KEY.all) {\n            url = `${BASE_URL}/search`;\n        } else if (type === SEARCH_KEY.user) {\n            url = `${BASE_URL}/search?user=${keyword}`;\n        } else {\n            url = `${BASE_URL}/search?keyword=${keyword}`;\n        };\n\n        const opt = {\n            method: \"GET\",\n            url: url,\n            headers: {\n                Authorization: `Bearer ${localStorage.getItem(TOKEN_KEY)}`\n            }\n        };\n\n        axios(opt)\n            .then((res) => {\n                if (res.status === 200) {\n                    setPost(res.data);\n                }\n            })\n            .catch((err) => {\n                message.error(\"Fetch posts failed!\");\n                console.log(\"fetch posts failed: \", err.message);\n            });\n    };\n\n    const renderPosts = (type) => {\n        if (!posts || posts.length === 0 ) {\n            return <div>No data!</div>;\n        }\n        if(type === \"image\") {\n            const imageArr = posts\n                .filter((item) => item.type === \"image\")\n                .map((image) => {\n                    return {\n                        src: image.url,\n                        user: image.user,\n                        caption: image.message,\n                        thumbnail: image.url,\n                        thumbnailWidth: 300,\n                        thumbnailHeight: 200\n                    };\n                });\n\n            return <PhotoGallery image={imageArr} />\n        } else if (type === \"video\") {\n            return (\n                <Row gutter={32}>\n                    {posts\n                        .filter((post) => post.type === \"video\")\n                        .map((post) => (\n                            <Col span={8} key={post.url}>\n                                <video src={post.url} controls={true} className=\"video-block\" />\n                                <p>\n                                    {post.user}: {post.message}\n                                </p>\n                            </Col>\n                        ))}\n                </Row>\n            );\n        }\n    };\n\n    const showPost = (type) => {\n        console.log(\"type -> \", type);\n        setActiveTab(type);\n\n        setTimeout(() => {\n            setSearchOption({ type: SEARCH_KEY.all, keyword: \"\"});\n        }, 3000);\n    };\n\n    const operations = <CreatePostButton onShowPost={showPost} />;\n\n    return (\n      <div className=\"home\">\n          <SearchBar handleSearch={ handleSearch }/>\n          <div className=\"display\">\n              <Tabs\n                  onChange={(key) => setActiveTab(key)}\n                  defaultActiveKey=\"image\"\n                  activeKey={activeTab}\n                  tabBarExtraContent={operations}\n              >\n                  <TabPane tab=\"Image\" key=\"image\">\n                      {renderPosts(\"image\")}\n                  </TabPane>\n                  <TabPane tab=\"Video\" key=\"video\">\n                      {renderPosts(\"video\")}\n                  </TabPane>\n              </Tabs>\n          </div>\n      </div>\n    );\n}\n\nexport default Home;","/Users/sicongtang/Developer/Around/around-web/src/components/Register.js",[],"/Users/sicongtang/Developer/Around/around-web/src/components/Login.js",[],"/Users/sicongtang/Developer/Around/around-web/src/components/SearchBar.js",[],"/Users/sicongtang/Developer/Around/around-web/src/components/CreatePostButton.js",["68"],"import React, {Component, createRef } from 'react';\nimport { Modal, Button, message } from \"antd\";\nimport axios from \"axios\";\n\nimport { BASE_URL, TOKEN_KEY } from \"../constants\";\nimport {PostForm} from \"./PostForm\";\n\nclass CreatePostButton extends Component {\n    state = {\n        visible: false,\n        confirmLoading: false\n    };\n\n    showModal = () => {\n        this.setState({\n            visible: true\n        });\n    };\n\n    handleOK = () => {\n        this.setState({\n            confirmLoading: true\n        });\n\n        this.postForm\n            .validateFields()\n            .then((form) => {\n                const { description, uploadPost } = form;\n                const { type, originFileObj } = uploadPost[0];\n                const postType = type.match(/^(image|video)/g)[0];\n                if(postType) {\n                    let formData = new FormData();\n                    formData.append(\"message\", description);\n                    formData.append(\"media_file\", originFileObj);\n\n                    const opt = {\n                        method: \"POST\",\n                        url: `${BASE_URL}/upload`,\n                        headers: {\n                            Authorization: `Bearer ${localStorage.getItem(TOKEN_KEY)}`\n                        },\n                        data: formData\n                    };\n\n                    axios(opt)\n                        .then((res) => {\n                            if (res.status === 200) {\n                                message.success(\"The image/video is uploaded!\");\n                                this.postForm.resetFields();\n                                this.handleCancel();\n                                this.props.onShowPost(postType);\n                                this.setState({ confirmLoading: false});\n                            }\n                        })\n                        .catch((err) => {\n                            console.log(\"Upload image/video failed: \", err.message);\n                            message.error(\"Failed to upload image/video!\");\n                            this.setState({ confirmLoading: false });\n                        });\n                }\n            })\n            .catch((err) => {\n                console.log(\"error ir validate form -> \", err);\n            });\n    };\n\n    handleCancel = () => {\n        console.log(\"Clicked cancel button\");\n        this.setState({\n            visible: false\n        });\n    };\n\n\n    render() {\n        const { visible, confirmLoading } = this.state;\n        return (\n            <div>\n                <Button type=\"primary\" onClick={this.showModal}>\n                    Create New Post\n                </Button>\n                <Modal\n                    title=\"Create New Post\"\n                    visible={visible}\n                    onOK={this.handleOK}\n                    okText=\"Create\"\n                    confirmLoading={confirmLoading}\n                    onCancel={this.handleCancel}\n                >\n                    <PostForm ref={(refInstance) => (this.postForm = refInstance)} />\n                </Modal>\n            </div>\n        );\n    }\n}\n\nexport default CreatePostButton;","/Users/sicongtang/Developer/Around/around-web/src/components/PhotoGallery.js",[],"/Users/sicongtang/Developer/Around/around-web/src/components/PostForm.js",[],["69","70"],{"ruleId":"71","replacedBy":"72"},{"ruleId":"73","replacedBy":"74"},{"ruleId":"71","replacedBy":"75"},{"ruleId":"73","replacedBy":"76"},{"ruleId":"77","severity":1,"message":"78","line":1,"column":17,"nodeType":"79","messageId":"80","endLine":1,"endColumn":25},{"ruleId":"77","severity":1,"message":"81","line":2,"column":35,"nodeType":"79","messageId":"80","endLine":2,"endColumn":41},{"ruleId":"77","severity":1,"message":"82","line":27,"column":17,"nodeType":"79","messageId":"80","endLine":27,"endColumn":21},{"ruleId":"77","severity":1,"message":"83","line":27,"column":23,"nodeType":"79","messageId":"80","endLine":27,"endColumn":30},{"ruleId":"77","severity":1,"message":"84","line":1,"column":27,"nodeType":"79","messageId":"80","endLine":1,"endColumn":36},{"ruleId":"71","replacedBy":"85"},{"ruleId":"73","replacedBy":"86"},"no-native-reassign",["87"],"no-negated-in-lhs",["88"],["87"],["88"],"no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar","'Button' is defined but never used.","'type' is assigned a value but never used.","'keyword' is assigned a value but never used.","'createRef' is defined but never used.",["87"],["88"],"no-global-assign","no-unsafe-negation"]